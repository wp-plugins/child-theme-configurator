jQuery(document).ready(function(t){function e(t){return s(t)?t:t.toString().replace(B,"&quot;")}function c(e){t(e).iris({change:function(){r(e)}})}function a(t){var e=parseInt(t),c=String.fromCharCode(e);return c}function n(t){var e=t.charCodeAt(0);return e}function r(e){var c=/^(ctc_(ovrd|\d+)_(parent|child)_([0-9a-z\-]+)_(\d+))(_\w+)?$/,a=t(e).parents(".ctc-selector-row, .ctc-parent-row").first(),n=a.find(".ctc-swatch").first(),r={parent:{},child:{}},l={parent:{origin:"",start:"",end:""},child:{origin:"",start:"",end:""}},o={child:!1,parent:!1},_={};return a.find(".ctc-parent-value, .ctc-child-value").each(function(){var a,n,u=t(this).attr("id"),d=u.toString().match(c),v=d[2],p=d[3],h="undefined"==typeof d[4]?"":d[4],f=d[5],x="undefined"==typeof d[6]?"":d[6],m="parent"==p?t(this).text():t(this).val(),g="ctc_"+v+"_child_"+h+"_i_"+f;if("child"==p&&(_[u]=m,_[g]=t("#"+g).is(":checked")?1:0),""!=m)if(!1===s(x))switch(x){case"_border_width":r[p][h+"-width"]=m;break;case"_border_style":r[p][h+"-style"]=m;break;case"_border_color":r[p][h+"-color"]=m;break;case"_background_url":r[p]["background-image"]=i(p,m);break;case"_background_color":r[p]["background-color"]=e.value;break;case"_background_color1":l[p].start=m,o[p]=!0;break;case"_background_color2":l[p].end=m,o[p]=!0;break;case"_background_origin":l[p].origin=m,o[p]=!0}else(a=h.toString().match(/^border(\-(top|right|bottom|left))?$/)&&!m.match(/none/))?(n=m.toString().split(/ +/),r[p][h+"-width"]="undefined"==typeof n[0]?"":n[0],r[p][h+"-style"]="undefined"==typeof n[1]?"":n[1],r[p][h+"-color"]="undefined"==typeof n[2]?"":n[2]):"background-image"==h?m.toString().match(/url\(/)?r[p]["background-image"]=i(p,m):(n=m.toString().split(/ +/),n.length>2?(l[p].origin="undefined"==typeof n[0]?"top":n[0],l[p].start="undefined"==typeof n[1]?"transparent":n[1],l[p].end="undefined"==typeof n[2]?"transparent":n[2],o[p]=!0):r[p]["background-image"]=m):r[p][h]=m}),"undefined"!=typeof n&&!1===s(n.attr("id"))&&(t(n).removeAttr("style"),o.parent&&t(n).ctcgrad(l.parent.origin,[l.parent.start,l.parent.end]),t(n).css(r.parent),n.attr("id").toString().match(/parent/)||(o.child&&t(n).ctcgrad(l.child.origin,[l.child.start,l.child.end]),t(n).css(r.child))),_}function l(e){var c,a,n;t(e).each(function(){switch(this.obj){case"imports":ctcAjax.imports=this.data;break;case"rule_val":ctcAjax.rule_val[this.key]=this.data,n=this.key;break;case"val_qry":ctcAjax.val_qry[this.key]=this.data;break;case"rule":ctcAjax.rule=this.data;break;case"sel_ndx":s(this.key)?ctcAjax.sel_ndx=this.data:"qsid"==this.key?(s(ctcAjax.sel_ndx[this.data.query])&&(ctcAjax.sel_ndx[this.data.query]={}),ctcAjax.sel_ndx[this.data.query][this.data.selector]=this.data.qsid):(ctcAjax.sel_ndx[this.key]=this.data,c=this.key);break;case"sel_val":ctcAjax.sel_val[this.key]=this.data,a=this.key;break;case"rewrite":N=this.key,P=this.data}})}function i(t,e){var c,a=e.toString().match(/url\(['" ]*(.+?)['" ]*\)/),n=s(a)?null:a[1],r=ctcAjax.theme_uri+"/"+("parent"==t?ctcAjax.parnt:ctcAjax.child)+"/";return n?c=n.toString().match(/^(https?:|\/)/)?e:"url("+r+n+")":!1}function s(t){if("undefined"==typeof t||!1===t||null===t||""===t)return!0;if(!0===t||"string"==typeof t||"number"==typeof t)return!1;if("object"==typeof t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}return!1}function o(){var e=[];return 1===G.sel_ndx?e:0===G.sel_ndx?(G.sel_ndx=1,x("sel_ndx",null,b),e):(!1===s(ctcAjax.sel_ndx)&&t.each(ctcAjax.sel_ndx,function(t){var c={label:t,value:t};e.push(c)}),e)}function _(e){var c=[];return 1===G.sel_ndx?c:0===G.sel_ndx?(G.sel_ndx=1,x("sel_ndx",e,A),c):(!1===s(ctcAjax.sel_ndx[e])&&t.each(ctcAjax.sel_ndx[e],function(t,e){var a={label:t,value:e};c.push(a)}),c)}function u(){var e=[];return 1===G.rule?e:0===G.rule?(G.rule=1,x("rule",null,k),e):(!1===s(ctcAjax.rule)&&t.each(ctcAjax.rule,function(t,c){var n={label:c.replace(/\d+/g,a),value:t};e.push(n)}),e.sort(function(t,e){return t.label>e.label?1:t.label<e.label?-1:0}))}function d(c,n,r){var l="",i=s(ctcAjax.sel_val[c])||s(ctcAjax.sel_val[c].value)||s(ctcAjax.sel_val[c].value[n])?"":ctcAjax.sel_val[c].value[n],o=g(n,"undefined"==typeof i?"":i.parnt),_=!1===s(i.i_parnt)&&i.i_parnt?ctcAjax.important_label:"",u=g(n,"undefined"==typeof i?"":i.child),d=!1===s(i.i_child)&&i.i_child?1:0,v="ctc_"+r+"_child_"+n+"_i_"+c;return!1===s(ctcAjax.sel_val[c])&&(l+='<div class="ctc-'+("ovrd"==r?"input":"selector")+'-row clearfix">'+Q,l+='<div class="ctc-input-cell">'+("ovrd"==r?n.replace(/\d+/g,a):ctcAjax.sel_val[c].selector+'<br/><a href="#" class="ctc-selector-edit" id="ctc_selector_edit_'+c+'" >'+ctcAjax.edit_txt+"</a> "+(s(o.orig)?ctcAjax.child_only_txt:""))+"</div>"+Q,"ovrd"==r&&(l+='<div class="ctc-parent-value ctc-input-cell" id="ctc_'+r+"_parent_"+n+"_"+c+'">'+(s(o.orig)?"[no value]":o.orig+_)+"</div>"+Q),l+='<div class="ctc-input-cell">'+Q,!1===s(o.names)&&(t.each(o.names,function(t,a){a=s(a)?"":a,l+='<div class="ctc-child-input-cell">'+Q;var i,o="ctc_"+r+"_child_"+n+"_"+c+a;!1===(i=u.values.shift())&&(i=""),l+=(s(a)?"":ctcAjax.field_labels[a]+":<br/>")+'<input type="text" id="'+o+'" name="'+o+'" class="ctc-child-value'+((a+n).toString().match(/color/)?" color-picker":"")+(a.toString().match(/url/)?" ctc-input-wide":"")+'" value="'+e(i)+'" />'+Q,l+="</div>"+Q}),l+='<label for="'+v+'"><input type="checkbox" id="'+v+'" name="'+v+'" value="1" '+(1===d?"checked":"")+" />"+ctcAjax.important_label+"</label>"+Q),l+="</div>"+Q,l+="ovrd"==r?"":'<div class="ctc-swatch ctc-specific" id="ctc_child_'+n+"_"+c+'_swatch">'+ctcAjax.swatch_txt+"</div>"+Q+'<div class="ctc-child-input-cell ctc-button-cell" id="ctc_save_'+n+"_"+c+'_cell">'+Q+'<input type="button" class="button ctc-save-input" id="ctc_save_'+n+"_"+c+'" name="ctc_save_'+n+"_"+c+'" value="Save" /></div>'+Q,l+="</div><!-- end input row -->"+Q),l}function v(e){if(1===G.sel_val)return!1;if(0==G.sel_val)return G.sel_val=1,x("sel_val",e,v),!1;var a,n,l;s(ctcAjax.sel_val[e])?t("#ctc_sel_ovrd_rule_inputs").html(""):(s(ctcAjax.sel_val[e].seq)?t("#ctc_child_load_order_container").html(""):(a="ctc_ovrd_child_seq_"+e,l=parseInt(ctcAjax.sel_val[e].seq),n='<input type="text" id="'+a+'" name="'+a+'" class="ctc-child-value" value="'+l+'" />',t("#ctc_child_load_order_container").html(n)),s(ctcAjax.sel_val[e].value)?t("#ctc_sel_ovrd_rule_inputs").html(""):(n="",t.each(ctcAjax.sel_val[e].value,function(t){n+=d(e,t,"ovrd")}),t("#ctc_sel_ovrd_rule_inputs").html(n).find(".color-picker").each(function(){c(this)}),r("#ctc_child_all_0_swatch")))}function p(e){if(1===G.preview)return!1;if(0==G.preview){G.preview=1;var e;return(e=t(this).attr("id").toString().match(/(child|parnt)/)[1])||(e="child"),F(""),x("preview",e,p),!1}2==G.preview&&(t("#view_"+e+"_options_panel").text(ctcAjax.previewResponse),G.preview=0)}function h(e){if(1===G.rule_val)return!1;if(0==G.rule_val)return G.rule_val=1,x("rule_val",e,h),!1;var c=ctcAjax.rule[e],a='<div class="ctc-input-row clearfix" id="ctc_rule_row_'+c+'">'+Q;!1===s(ctcAjax.rule_val[e])&&(t.each(ctcAjax.rule_val[e],function(t,e){var n=g(c,e);a+='<div class="ctc-parent-row clearfix" id="ctc_rule_row_'+c+"_"+t+'">'+Q,a+='<div class="ctc-input-cell ctc-parent-value" id="ctc_'+t+"_parent_"+c+"_"+t+'">'+n.orig+"</div>"+Q,a+='<div class="ctc-input-cell">'+Q,a+='<div class="ctc-swatch ctc-specific" id="ctc_'+t+"_parent_"+c+"_"+t+'_swatch">'+ctcAjax.swatch_txt+"</div></div>"+Q,a+='<div class="ctc-input-cell"><a href="#" class="ctc-selector-handle" id="ctc_selector_'+c+"_"+t+'">'+ctcAjax.selector_txt+"</a></div>"+Q,a+='<div id="ctc_selector_'+c+"_"+t+'_container" class="ctc-selector-container clearfix">'+Q,a+='<a href="#" id="ctc_selector_'+c+"_"+t+'_close" class="ctc-selector-handle" style="float:right">'+ctcAjax.close_txt+'</a><div id="ctc_status_val_qry_'+t+'"></div>'+Q,a+='<div id="ctc_selector_'+c+"_"+t+'_rows"></div>'+Q,a+="</div></div>"+Q}),a+="</div>"+Q),t("#ctc_rule_value_inputs").html(a).find(".ctc-swatch").each(function(){r(this)})}function f(e){if(1==G.val_qry)return!1;var a,l,i=t("#ctc_rule_menu_selected").text().replace(/[^\w\-]/g,n),o="";return 0===G.val_qry?(G.val_qry=1,a={rule:i},x("val_qry",e,f,a),!1):(!1===s(ctcAjax.val_qry[e])&&t.each(ctcAjax.val_qry[e],function(c,a){page_rule=c,t.each(a,function(a,n){o+='<h4 class="ctc-query-heading">'+a+"</h4>"+Q,!1===s(n)&&t.each(n,function(t,a){ctcAjax.sel_val[t]=a,o+=d(t,c,e)})})}),l="#ctc_selector_"+i+"_"+e+"_rows",t(l).html(o).find(".color-picker").each(function(){c(this)}),void t(l).find(".ctc-swatch").each(function(){r(this)}))}function x(e,c,a,n){var r={ctc_query_obj:e,ctc_query_key:c},i="#ctc_status_"+e+("val_qry"==e?"_"+c:"");return"object"==typeof n&&t.each(n,function(t,e){r["ctc_query_"+t]=e}),t(".ctc-status-icon").remove(),t(i).append('<span class="ctc-status-icon spinner"></span>'),t(".spinner").show(),r.action="ctc_query",r._wpnonce=t("#_wpnonce").val(),t.post(ctcAjax.ajaxurl,r,function(n){return G[e]=2,t(".ctc-status-icon").removeClass("spinner"),s(n)?(t(".ctc-status-icon").addClass("failure"),void("preview"==e&&(ctcAjax.previewResponse=ctcAjax.css_fail_txt,a(c)))):(t(".ctc-status-icon").addClass("success"),"preview"==e?ctcAjax.previewResponse=n.shift().data:l(n),"function"==typeof a&&a(c),!1)},"json").fail(function(){t(".ctc-status-icon").removeClass("spinner"),t(".ctc-status-icon").addClass("failure"),"preview"==e?(ctcAjax.previewResponse=ctcAjax.css_fail_txt,G[e]=2,a(c)):G[e]=0}),!1}function m(e){var c,a,n,i,o={},_=t(e).attr("id");return s(V[_])&&(V[_]=0),V[_]++,t(e).prop("disabled",!0),t(".ctc-status-icon").remove(),t(e).parent(".ctc-textarea-button-cell, .ctc-button-cell").append('<span class="ctc-status-icon spinner"></span>'),t(".spinner").show(),(c=t("#ctc_new_selectors"))&&"ctc_save_new_selectors"==t(e).attr("id")?(o.ctc_new_selectors=c.val(),(a=t("#ctc_sel_ovrd_query_selected"))&&(o.ctc_sel_ovrd_query=a.text())):(n=t("#ctc_child_imports"))&&"ctc_save_imports"==t(e).attr("id")?o.ctc_child_imports=n.val():o=r(e),t("#ctc_sel_ovrd_selector_selected").find("#ctc_rewrite_selector").each(function(){i=t("#ctc_rewrite_selector").val(),origsel=t("#ctc_rewrite_selector_orig").val(),s(i)||!i.toString().match(/\w/)?i=origsel:o.ctc_rewrite_selector=i,t(".ctc-rewrite-toggle").text(ctcAjax.rename_txt),t("#ctc_sel_ovrd_selector_selected").html(i)}),o.action="ctc_update",o._wpnonce=t("#_wpnonce").val(),t.post(ctcAjax.ajaxurl,o,function(c){return t(e).prop("disabled",!1),t(".ctc-status-icon").removeClass("spinner"),s(c)?t(".ctc-status-icon").addClass("failure"):(t(".ctc-status-icon").addClass("success"),t("#ctc_new_selectors").val(""),l(c),C(),!1===s(N)&&(j(N,P),N=P=null)),!1},"json").fail(function(){t(e).prop("disabled",!1),t(".ctc-status-icon").removeClass("spinner"),t(".ctc-status-icon").addClass("failure")}),!1}function g(t,e){e="undefined"==typeof e?"":e;var c={orig:e};if(t.toString().match(/^border(\-(top|right|bottom|left))?$/)){var a=e.toString().split(/ +/);c.names=["_border_width","_border_style","_border_color"],c.values=["undefined"==typeof a[0]?"":a[0],"undefined"==typeof a[1]?"":a[1],"undefined"==typeof a[2]?"":a[2]]}else if(t.toString().match(/^background\-image/))if(c.names=["_background_url","_background_origin","_background_color1","_background_color2"],c.values=["","","",""],!1!==s(e)||e.toString().match(/url/))c.values[0]=e;else{var a=e.toString().split(/:/);c.values[1]="undefined"==typeof a[0]?"":a[0],c.values[2]="undefined"==typeof a[1]?"":a[1],c.values[3]="undefined"==typeof a[3]?"":a[3],c.orig=[c.values[1],c.values[2],c.values[3]].join(" ")}else c.names=[""],c.values=[e];return c}function w(e){U=e,t("#ctc_sel_ovrd_query").val(""),t("#ctc_sel_ovrd_query_selected").text(e),t("#ctc_sel_ovrd_selector").val(""),t("#ctc_sel_ovrd_selector_selected").html("&nbsp;"),t("#ctc_sel_ovrd_rule_inputs").html(""),A(e),r("#ctc_child_all_0_swatch"),t("#ctc_new_selector_row").show()}function j(e,c){t("#ctc_sel_ovrd_selector").val(""),t("#ctc_sel_ovrd_selector_selected").text(c),t("#ctc_sel_ovrd_qsid").val(e),O=e,1!=G.sel_val&&(G.sel_val=0),v(e),t(".ctc-rewrite-toggle").text(ctcAjax.rename_txt),t("#ctc_sel_ovrd_new_rule, #ctc_sel_ovrd_rule_header,#ctc_sel_ovrd_rule_inputs_container,#ctc_sel_ovrd_rule_inputs,.ctc-rewrite-toggle").show()}function y(e,c){t("#ctc_rule_menu").val(""),t("#ctc_rule_menu_selected").text(c),1!=G.rule_val&&(G.rule_val=0),h(e),t(".ctc-rewrite-toggle").text(ctcAjax.rename_txt),t("#ctc_rule_value_inputs,#ctc_input_row_rule_header").show()}function b(){J=o(),t("#ctc_sel_ovrd_query").autocomplete({source:J,minLength:0,selectFirst:!0,autoFocus:!0,select:function(t,e){return w(e.item.value),!1},focus:function(t){t.preventDefault()}})}function A(e){H=_(e),t("#ctc_sel_ovrd_selector").autocomplete({source:H,selectFirst:!0,autoFocus:!0,select:function(t,e){return j(e.item.value,e.item.label),!1},focus:function(t){t.preventDefault()}})}function k(){K=u(),t("#ctc_rule_menu").autocomplete({source:K,selectFirst:!0,autoFocus:!0,select:function(t,e){return y(e.item.value,e.item.label),!1},focus:function(t){t.preventDefault()}})}function q(e,c){var n=[],r=s(ctcAjax.sel_val[O])||s(ctcAjax.sel_val[O].value);s(K)&&(K=u()),t.each(K,function(c,l){var i=!1,s=new RegExp(t.ui.autocomplete.escapeRegex(e.term),"i");if(s.test(l.label)){if(!1===r&&(t.each(ctcAjax.sel_val[O].value,function(t){return l.label==t.replace(/\d+/g,a)?(i=!0,!1):void 0}),i))return;n.push(l)}}),c(n)}function S(){t("#ctc_new_rule_menu").autocomplete({source:q,selectFirst:!0,autoFocus:!0,select:function(e,a){e.preventDefault();var r=t(d(O,a.item.label.replace(/[^\w\-]/g,n),"ovrd"));return t("#ctc_sel_ovrd_rule_inputs").append(r),t("#ctc_new_rule_menu").val(""),s(ctcAjax.sel_val[O].value)&&(ctcAjax.sel_val[O].value={}),ctcAjax.sel_val[O].value[a.item.label]={child:""},r.find('input[type="text"]').each(function(e,a){t(a).hasClass("color-picker")&&c(a),t(a).focus()}),!1},focus:function(t){t.preventDefault()}})}function C(){b(),A(U),k(),S()}function D(e,c){var a=!1;return t.each(ctcAjax.themes,function(n,r){return t.each(r,function(t){return t!=e||"parnt"!=n&&"new"!=c?void 0:(a=!0,!1)}),a?!1:void 0}),a}function F(e){var c="";!1===s(e)&&t.each(e,function(e,a){c+='<div class="'+e+'"><ul>'+Q,t(a).each(function(t,e){c+="<li>"+e.toString()+"</li>"+Q}),c+="</ul></div>"}),t("#ctc_error_notice").html(c)}function R(){var e=/[^\w\-]/,c=t("#ctc_child_template").val().toString().replace(e).toLowerCase(),a=t("#ctc_theme_child").val().toString().replace(e).toLowerCase(),n=t("input[name=ctc_child_type]:checked").val(),r=[];return"new"==n&&(a=c),D(a,n)&&r.push(ctcAjax.theme_exists_txt.toString().replace(/%s/,a)),""===a&&r.push(ctcAjax.inval_theme_txt),""===t("#ctc_child_name").val()&&r.push(ctcAjax.inval_name_txt),r.length?(F({error:r}),!1):!0}function $(){var e=t("#ctc_theme_child").val();!1===s(ctcAjax.themes.child[e])&&(t("#ctc_child_name").val(ctcAjax.themes.child[e].Name),t("#ctc_child_author").val(ctcAjax.themes.child[e].Author),t("#ctc_child_version").val(ctcAjax.themes.child[e].Version))}function T(){t(".updated, .error").slideUp("slow",function(){t(".updated").remove()})}function E(){var e,c=t("#ctc_theme_parnt").val(),a=ctcAjax.homeurl+"?preview=1&template="+c+"&stylesheet="+c,n=new RegExp("<link rel=[\"']stylesheet[\"'][^>]+?"+ctcAjax.theme_uri+"/"+c+"/(.+?\\.css)[^>]+?>","g");s(c)||t.get(a,function(c){for(;(e=n.exec(c))&&(ctcAjax.addl_css.push(e[1]),"style.css"!=e[1]);)t(".ctc_checkbox").each(function(){t(this).val()==e[1]&&t(this).prop("checked",!0)})})}function L(e){var c=e+"_panel";t(".nav-tab").removeClass("nav-tab-active"),t(".ctc-option-panel").removeClass("ctc-option-panel-active"),t(".ctc-selector-container").hide(),t(e).addClass("nav-tab-active"),t(".ctc-option-panel-container").scrollTop(0),t(c).addClass("ctc-option-panel-active")}function z(e){var c=t(e).attr("id").match(/_(\d+)$/)[1],a=ctcAjax.sel_val[c].query,n=ctcAjax.sel_val[c].selector,r="#query_selector_options";w(a),j(c,n),L(r)}function I(c){var a;t("#ctc_rewrite_selector").length?(a=t("#ctc_rewrite_selector_orig").val(),t("#ctc_sel_ovrd_selector_selected").text(a),t(c).text(ctcAjax.rename_txt)):(a=t("#ctc_sel_ovrd_selector_selected").text(),t("#ctc_sel_ovrd_selector_selected").html('<input id="ctc_rewrite_selector" name="ctc_rewrite_selector" type="text" value="'+e(a)+'" autocomplete="off" /><input id="ctc_rewrite_selector_orig" name="ctc_rewrite_selector_orig" type="hidden" value="'+e(a)+'"/>'),t(c).text(ctcAjax.cancel_txt))}var O,N,P,Q="\n",U="base",V={},B=new RegExp('"',"g"),G={rule:2,sel_ndx:2,val_qry:0,rule_val:0,sel_val:0,preview:0},H=[],J=[],K=[];t(".color-picker").each(function(){c(this)}),t(".ctc-option-panel-container").on("focus",".color-picker",function(){F(""),t(this).iris("toggle"),t(".iris-picker").css({position:"absolute","z-index":10})}),t(".ctc-option-panel-container").on("focus","input",function(){F(""),t(".color-picker").not(this).iris("hide")}),t(".ctc-option-panel-container").on("change",".ctc-child-value, input[type=checkbox]",function(){r(this)}),t(".ctc-option-panel-container").on("click",".ctc-selector-handle",function(e){e.preventDefault(),F("");var c=t(this).attr("id").toString().replace("_close",""),a=c.toString().match(/_(\d+)$/)[1];t("#"+c+"_container").is(":hidden")&&(1!=G.val_qry&&(G.val_qry=0),f(a)),t("#"+c+"_container").fadeToggle("fast"),t(".ctc-selector-container").not("#"+c+"_container").fadeOut("fast")}),t(".nav-tab").on("click",function(e){e.preventDefault(),F(""),t(".ctc-status-icon").remove();var c="#"+t(this).attr("id");L(c)}),t("#view_child_options,#view_parnt_options").on("click",p),t("#ctc_load_form").on("submit",function(){return R()&&confirm(ctcAjax.load_txt)}),t("#parent_child_options_panel").on("change","#ctc_theme_child",$),t(document).on("click",".ctc-save-input",function(){m(this)}),t(document).on("click",".ctc-selector-edit",function(){z(this)}),t(document).on("click",".ctc-rewrite-toggle",function(t){t.preventDefault(),I(this)}),t(document).on("change","#ctc_theme_parnt",function(){t(this).parents(".ctc-input-row").first().append('<span class="ctc-status-icon spinner"></span>'),t(".spinner").show(),document.location="?page=chld_thm_cfg_menu&ctc_parent="+t(this).val()}),t(document).on("click","#ctc_additional_css_label",function(){t(this).toggleClass("open"),t("#ctc_additional_css_files").slideToggle("fast")}),C(),w(U),E(),t("input[type=submit],input[type=button]").prop("disabled",!1),setTimeout(T,6e3)});