/*!
 * jQuery UI Selectmenu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){
;var b=a.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var c=this.element.uniqueId().attr("id");this.ids={element:c,button:c+"-button",menu:c+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable()}},_drawButton:function(){var d=this,c=this.element.attr("tabindex");this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(e){this.button.focus();e.preventDefault()}});this.element.hide();this.button=a("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:c||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);a("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=a("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!d.menuItems){d._refreshMenu()}});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var c=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(d,e){d.preventDefault();c._setSelection();c._select(e.item.data("ui-selectmenu-item"),d)},focus:function(e,f){var d=f.item.data("ui-selectmenu-item");if(c.focusIndex!=null&&d.index!==c.focusIndex){c._trigger("focus",e,{item:d});if(!c.isOpen){c._select(d,e)}}c.focusIndex=d.index;c.button.attr("aria-activedescendant",c.menuItems.eq(d.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton()}},_refreshMenu:function(){this.menu.empty();var d,c=this.element.find("option");if(!c.length){return}this._parseOptions(c);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");d=this._getSelectedItem();this.menuInstance.focus(null,d);this._setAria(d.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(c){if(this.options.disabled){return}if(!this.menuItems){this._refreshMenu()}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem())}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",c)},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(c){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",c)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(e,d){var f=this,c="";a.each(d,function(g,h){if(h.optgroup!==c){a("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(h.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:h.optgroup}).appendTo(e);c=h.optgroup}f._renderItemData(e,h)})},_renderItemData:function(c,d){return this._renderItem(c,d).data("ui-selectmenu-item",d)},_renderItem:function(d,e){var c=a("<li>");if(e.disabled){c.addClass("ui-state-disabled")}this._setText(c,e.label);return c.appendTo(d)},_setText:function(c,d){if(d){c.text(d)}else{c.html("&#160;")}},_move:function(g,f){var e,d,c=".ui-menu-item";if(this.isOpen){e=this.menuItems.eq(this.focusIndex)}else{e=this.menuItems.eq(this.element[0].selectedIndex);c+=":not(.ui-state-disabled)"}if(g==="first"||g==="last"){d=e[g==="first"?"prevAll":"nextAll"](c).eq(-1)}else{d=e[g+"All"](c).eq(0)}if(d.length){this.menuInstance.focus(f,d)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(c){this[this.isOpen?"close":"open"](c)},_setSelection:function(){var c;if(!this.range){return}if(window.getSelection){c=window.getSelection();c.removeAllRanges();c.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function(c){if(!this.isOpen){return}if(!a(c.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(c)}}},_buttonEvents:{mousedown:function(){var c;if(window.getSelection){c=window.getSelection();if(c.rangeCount){this.range=c.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function(c){this._setSelection();this._toggle(c)},keydown:function(d){var c=true;switch(d.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(d);c=false;break;case a.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(d)}break;case a.ui.keyCode.UP:if(d.altKey){this._toggle(d)}else{this._move("prev",d)}break;case a.ui.keyCode.DOWN:if(d.altKey){this._toggle(d)}else{this._move("next",d)}break;case a.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(d)}else{this._toggle(d)}break;case a.ui.keyCode.LEFT:this._move("prev",d);break;case a.ui.keyCode.RIGHT:this._move("next",d);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",d);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d);c=false}if(c){d.preventDefault()}}},_selectFocusedItem:function(d){var c=this.menuItems.eq(this.focusIndex);if(!c.hasClass("ui-state-disabled")){this._select(c.data("ui-selectmenu-item"),d)}},_select:function(d,c){var e=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index;this._setText(this.buttonText,d.label);this._setAria(d);this._trigger("select",c,{item:d});if(d.index!==e){this._trigger("change",c,{item:d})}this.close(c)},_setAria:function(c){var d=this.menuItems.eq(c.index).attr("id");this.button.attr({"aria-labelledby":d,"aria-activedescendant":d});this.menu.attr("aria-activedescendant",d)},_setOption:function(c,d){if(c==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(d.button)}this._super(c,d);if(c==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(c==="disabled"){this.menuInstance.option("disabled",d);this.button.toggleClass("ui-state-disabled",d).attr("aria-disabled",d);this.element.prop("disabled",d);if(d){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}}if(c==="width"){this._resizeButton()}},_appendTo:function(){var c=this.options.appendTo;if(c){c=c.jquery||c.nodeType?a(c):this.document.find(c).eq(0)}if(!c||!c[0]){c=this.element.closest(".ui-front")}if(!c.length){c=this.document[0].body}return c},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var c=this.options.width;if(!c){c=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(c)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(c){var d=[];c.each(function(f,h){var g=a(h),e=g.parent("optgroup");d.push({element:g,index:f,value:g.attr("value"),label:g.text(),optgroup:e.attr("label")||"",disabled:e.prop("disabled")||g.prop("disabled")})});this.items=d},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}));